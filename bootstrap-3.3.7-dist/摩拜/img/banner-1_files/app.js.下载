document.addEventListener("DOMContentLoaded",function(a){}),window.addEventListener("load",function(a){document.body.classList.add("js-loaded")},!1),$(function(){function a(a){a.matches?($("body").addClass("is-small"),$("body").removeClass("is-desktop")):($("body").removeClass("is-small"),$("body").addClass("is-desktop"))}function b(){var a=$(".headline-news"),b=$(".headline-news a");null!==b&&$.ajax({url:"https://mobike.com/wp-json/wp/v2/posts?categories=17&per_page=1",dataType:"json",timeout:5e3,success:function(c){if(c[0].hasOwnProperty("id")){var d=c[0].title.rendered,e=c[0].link;b.attr("href",e),b.find(".headline-text").text(d),a.addClass("on")}},error:function(a){}})}function c(a){var b=$(a.wrap);null!==b&&b.length&&$.ajax({url:a.url,dataType:"json",timeout:5e3,success:function(a){d(a,b)},error:function(a){}})}function d(a,b){for(var c=a.length,d=0;d<c;d++)if(a[d].hasOwnProperty("id")){var e=a[d],f=moment(e.date).format("YYYY-MM"),g=f,h="",i="";d-1>=0&&(g=moment(a[d-1].date).format("YYYY-MM")),f===g&&0!==d||(h="<div class='year'>"+moment(e.date).format("YYYY")+"<span class='year-symbol'> 年 </span></div><div class='month'>"+moment(e.date).format("M")+" 月</div>",i="splitter"),l.push('<section class="intro-section cols blog-entry '+i+'"><div class="cols container-md"><div class="width width--30"><div class="blog-entry-date">'+h+'</div></div><div class="width width--70"><div class="blog-entry-text"><h2 class="title"><a href="'+e.link+'">'+e.title.rendered+'</a></h2><p class="meta">'+moment(e.date).format("YYYY [年] M [月] D [日]，hh:mm")+"</p>"+e.excerpt.rendered+"</div></div></div></section>")}b.html(l.join(""))}var e=($(document),window.matchMedia("(max-width: 1080px)"));$(".has-subnav > a").click(function(a){a.preventDefault(),$(this).parent().toggleClass("on")}),$(".nav-links-toggle").click(function(a){a.preventDefault(),$(".nav-links").toggleClass("mobile-open"),$(".nav-links-mobile").toggleClass("mobile-open"),$(".global-navigation-wrap").toggleClass("mobile-open")}),window.matchMedia&&(a(e),e.addListener(a)),$(".tooltip").tooltipster({animation:"fade",animationDuration:200,arrow:!0,contentAsHTML:!0,delay:0,interactive:!0,maxWidth:260,multiple:!1,repositionOnScroll:!0,trigger:"custom",triggerOpen:{click:!0,mouseenter:!0,tap:!0},triggerClose:{mouseleave:!0,tap:!0},theme:"tooltipster-mobike",zIndex:1e3}),$(".tooltip-light").tooltipster({animation:"fade",animationDuration:200,arrow:!0,contentAsHTML:!0,delay:0,interactive:!0,maxWidth:260,multiple:!1,repositionOnScroll:!0,trigger:"custom",triggerOpen:{click:!0,tap:!0},triggerClose:{click:!0,tap:!0},theme:"tooltipster-mobike-light"}),$(".city-change").on("click",function(a){a.preventDefault(),$(".intro-section-current-city").toggleClass("has-list"),$(".intro-section-city-list").toggleClass("on").slideToggle(200)});var f=(new Swiper(".swiper-hero",{effect:"fade",autoplay:4e3,simulateTouch:!1,keyboardControl:!0,loop:!0,onInit:function(a){var b=a.slides.slice(1,-1);b.each(function(a){var b=new Image,c=$(this),d=/.*url\('(.*)'\)/i,e=c.children().attr("style").match(d)[1];b.src=e,b.addEventListener("load",function(){var c=new Vibrant(b),d=c.swatches();$(".header-mask-"+(a+1)).attr("data-color",d.DarkMuted.getRgb()).css({background:"linear-gradient(to bottom, rgba("+d.DarkMuted.getRgb()+", .6) 0%, rgba("+d.DarkMuted.getRgb()+", 0) 100%)"})})})},onTransitionStart:function(a){var b=a.realIndex+1,c=$(".header-mask-"+b),d=c.data("color");$(".header-mask").removeClass("on"),c.addClass("on"),d&&($(".btn.btn-hero").css({"box-shadow":"0 6px 30px 0 rgba("+d+", .6)"}),$(".headline-news").css({background:"rgba("+d+", .25)"}))}}),new Swiper(".swiper-guide-content-1",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",spaceBetween:5})),g=new Swiper(".swiper-guide-text-1",{spaceBetween:0,centeredSlides:!0,slidesPerView:"auto"});f.params.control=g,g.params.control=f;var h=new Swiper(".swiper-guide-content-2",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",spaceBetween:5}),i=new Swiper(".swiper-guide-text-2",{spaceBetween:0,centeredSlides:!0,slidesPerView:"auto"});h.params.control=i,i.params.control=h;var j=new Swiper(".swiper-guide-content-3",{nextButton:".swiper-button-next",prevButton:".swiper-button-prev",spaceBetween:5}),k=new Swiper(".swiper-guide-text-3",{spaceBetween:0,centeredSlides:!0,slidesPerView:"auto"});j.params.control=k,k.params.control=j,$(".headline-news a").length&&b();var l=[];c({wrap:".page-cities .intro-section-wrap",url:"https://mobike.com/cn/wp-json/wp/v2/posts?categories=16&page=1&per_page=100"}),c({wrap:".page-news .intro-section-wrap",url:"https://mobike.com/cn/wp-json/wp/v2/posts?categories=17&page=1&per_page=100"})});